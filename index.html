<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>羽毛球场预约（示例前端）</title>
  <style>
    body { font-family: Arial, "Microsoft Yahei", sans-serif; padding: 20px; }
    label { display:block; margin-top:10px; }
    select, input { padding: 6px; width: 220px; }
    button { margin-top: 12px; padding: 8px 14px; }
    pre { background:#f6f6f6; padding:10px; }
  </style>
</head>
<body>
  <h2>羽毛球场预约（示例前端）</h2>

  <label>选择用户（server-side 在 USERS 中预先配置 token/auth）：
    <select id="userSelect">
      <option value="1">用户 1</option>
      <option value="2">用户 2</option>
      <option value="3">用户 3</option>
      <option value="4">用户 4</option>
      <option value="5">用户 5</option>
    </select>
  </label>

  <label>选择场地（1-10，对应 ymq1-ymq10）：
    <select id="placeSelect">
      <!-- 1..10 -->
      <script>
        for(let i=1;i<=10;i++){
          document.write(`<option value="${i}">${i}</option>`);
        }
      </script>
    </select>
  </label>

  <label>选择时间段：
    <select id="timeRangeSelect">
      <option>06:00-07:30</option>
      <option>07:30-10:00</option>
      <option>10:00-12:00</option>
      <option>12:00-13:00</option>
      <option>13:00-15:30</option>
      <option>15:30-17:30</option>
      <option>17:30-19:30</option>
      <option>19:30-21:30</option>
    </select>
  </label>

  <label><input type="checkbox" id="scheduleMidnight"> 在午夜（00:00）执行（否则立即执行）</label>

  <button id="submitBtn">提交预约</button>

  <h3>返回 / 日志</h3>
  <pre id="output">等待操作...</pre>

  <script>
    document.getElementById('submitBtn').addEventListener('click', async () => {
      const user_id = parseInt(document.getElementById('userSelect').value,10);
      const place = parseInt(document.getElementById('placeSelect').value,10);
      const time_range = document.getElementById('timeRangeSelect').value;
      const schedule_at_midnight = document.getElementById('scheduleMidnight').checked;

      const body = { user_id, place, time_range, schedule_at_midnight };

      document.getElementById('output').textContent = "正在发送请求...";

      try {
       const resp = await fetch('https://mindful-spirit-production-a4b6.up.railway.app/reserve', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(body)
});

        const data = await resp.json();
        document.getElementById('output').textContent = JSON.stringify(data, null, 2);
      } catch (e) {
        document.getElementById('output').textContent = "请求失败: " + e;
      }
    });
  </script>
</body>
</html>
